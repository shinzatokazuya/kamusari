{% extends "base.html" %}

{% block title %}{% if query %}Resultados para "{{ query }}"{% else %}Buscar{% endif %} - BrasileirÃ£o Stats{% endblock
%}

{% block content %}
<div class="container">
    <!-- Hero de Busca -->
    <section class="hero-secundario">
        <h1>ğŸ” Busca AvanÃ§ada</h1>
        <p>Encontre clubes, jogadores, treinadores, Ã¡rbitros e estÃ¡dios</p>
    </section>

    <!-- FormulÃ¡rio de Busca -->
    <section class="section-card busca-principal">
        <form action="{{ url_for('buscar') }}" method="get" class="form-busca-avancada">
            <div class="input-busca-container">
                <input type="text" name="q" class="input-busca-grande" placeholder="Digite o que vocÃª procura..."
                    value="{{ query or '' }}" autofocus>
                <button type="submit" class="btn-buscar">
                    ğŸ” Buscar
                </button>
            </div>
        </form>
    </section>

    {% if query %}
    <!-- Resultados da Busca -->
    <div class="resultados-container">
        {% if resultados %}
        <!-- Clubes -->
        {% if resultados.clubes %}
        <section class="section-card resultados-secao">
            <h2>âš½ Clubes ({{ resultados.clubes|length }})</h2>
            <div class="resultados-lista">
                {% for clube in resultados.clubes %}
                <a href="{{ url_for('clube', nome=clube.clube) }}" class="resultado-item">
                    <div class="resultado-icone">
                        <span class="escudo-inicial">{{ clube.clube[0] }}</span>
                    </div>
                    <div class="resultado-info">
                        <h3>{{ clube.clube }}</h3>
                        {% if clube.apelido %}
                        <p class="resultado-subtitulo">{{ clube.apelido }}</p>
                        {% endif %}
                        {% if clube.cidade and clube.UF %}
                        <p class="resultado-detalhes">ğŸ“ {{ clube.cidade }}, {{ clube.UF }}</p>
                        {% endif %}
                    </div>
                    <div class="resultado-seta">â†’</div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Jogadores -->
        {% if resultados.jogadores %}
        <section class="section-card resultados-secao">
            <h2>ğŸ‘¤ Jogadores ({{ resultados.jogadores|length }})</h2>
            <div class="resultados-lista">
                {% for jogador in resultados.jogadores %}
                <a href="{{ url_for('jogador', jogador_id=jogador.ID) }}" class="resultado-item">
                    <div class="resultado-icone">
                        <span class="icone-tipo">ğŸ‘¤</span>
                    </div>
                    <div class="resultado-info">
                        <h3>{{ jogador.nome }}</h3>
                        {% if jogador.apelido %}
                        <p class="resultado-subtitulo">"{{ jogador.apelido }}"</p>
                        {% endif %}
                        <div class="resultado-detalhes">
                            {% if jogador.posicao %}
                            <span class="badge">{{ jogador.posicao }}</span>
                            {% endif %}
                            {% if jogador.nascimento %}
                            <span>ğŸ“… {{ jogador.nascimento }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="resultado-seta">â†’</div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Treinadores -->
        {% if resultados.treinadores %}
        <section class="section-card resultados-secao">
            <h2>ğŸ‘” Treinadores ({{ resultados.treinadores|length }})</h2>
            <div class="resultados-lista">
                {% for treinador in resultados.treinadores %}
                <a href="{{ url_for('treinador', treinador_id=treinador.ID) }}" class="resultado-item">
                    <div class="resultado-icone">
                        <span class="icone-tipo">ğŸ‘”</span>
                    </div>
                    <div class="resultado-info">
                        <h3>{{ treinador.nome }}</h3>
                        {% if treinador.apelido %}
                        <p class="resultado-subtitulo">"{{ treinador.apelido }}"</p>
                        {% endif %}
                        {% if treinador.nacionalidade %}
                        <p class="resultado-detalhes">ğŸŒ {{ treinador.nacionalidade }}</p>
                        {% endif %}
                    </div>
                    <div class="resultado-seta">â†’</div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Ãrbitros -->
        {% if resultados.arbitros %}
        <section class="section-card resultados-secao">
            <h2>ğŸŸ¨ Ãrbitros ({{ resultados.arbitros|length }})</h2>
            <div class="resultados-lista">
                {% for arbitro in resultados.arbitros %}
                <a href="{{ url_for('arbitro', arbitro_id=arbitro.ID) }}" class="resultado-item">
                    <div class="resultado-icone">
                        <span class="icone-tipo">ğŸŸ¨</span>
                    </div>
                    <div class="resultado-info">
                        <h3>{{ arbitro.nome }}</h3>
                        {% if arbitro.naturalidade %}
                        <p class="resultado-detalhes">ğŸ“ {{ arbitro.naturalidade }}</p>
                        {% endif %}
                    </div>
                    <div class="resultado-seta">â†’</div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- EstÃ¡dios -->
        {% if resultados.estadios %}
        <section class="section-card resultados-secao">
            <h2>ğŸŸï¸ EstÃ¡dios ({{ resultados.estadios|length }})</h2>
            <div class="resultados-lista">
                {% for estadio in resultados.estadios %}
                <a href="{{ url_for('estadio', estadio_id=estadio.ID) }}" class="resultado-item">
                    <div class="resultado-icone">
                        <span class="icone-tipo">ğŸŸï¸</span>
                    </div>
                    <div class="resultado-info">
                        <h3>{{ estadio.estadio }}</h3>
                        {% if estadio.cidade and estadio.UF %}
                        <p class="resultado-detalhes">ğŸ“ {{ estadio.cidade }}, {{ estadio.UF }}</p>
                        {% endif %}
                        {% if estadio.capacidade %}
                        <p class="resultado-detalhes">ğŸ‘¥ Capacidade: {{ "{:,}".format(estadio.capacidade).replace(',',
                            '.') }}</p>
                        {% endif %}
                    </div>
                    <div class="resultado-seta">â†’</div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        <!-- Nenhum resultado -->
        {% if not resultados.clubes and not resultados.jogadores and not resultados.treinadores and not
        resultados.arbitros and not resultados.estadios %}
        <section class="section-card">
            <div class="sem-resultados">
                <div class="sem-resultados-icone">ğŸ”</div>
                <h2>Nenhum resultado encontrado</h2>
                <p>NÃ£o encontramos nada para "<strong>{{ query }}</strong>"</p>
                <p class="dica">Tente usar termos diferentes ou verifique a ortografia</p>
            </div>
        </section>
        {% endif %}
        {% endif %}
    </div>
    {% else %}
    <!-- SugestÃµes quando nÃ£o hÃ¡ busca -->
    <section class="section-card">
        <h2>ğŸ’¡ SugestÃµes de Busca</h2>
        <div class="sugestoes-grid">
            <div class="sugestao-categoria">
                <h3>âš½ Clubes Populares</h3>
                <div class="sugestoes-lista">
                    <a href="{{ url_for('buscar') }}?q=Flamengo" class="sugestao-link">Flamengo</a>
                    <a href="{{ url_for('buscar') }}?q=Palmeiras" class="sugestao-link">Palmeiras</a>
                    <a href="{{ url_for('buscar') }}?q=SÃ£o Paulo" class="sugestao-link">SÃ£o Paulo</a>
                    <a href="{{ url_for('buscar') }}?q=Corinthians" class="sugestao-link">Corinthians</a>
                </div>
            </div>

            <div class="sugestao-categoria">
                <h3>ğŸŸï¸ EstÃ¡dios Famosos</h3>
                <div class="sugestoes-lista">
                    <a href="{{ url_for('buscar') }}?q=MaracanÃ£" class="sugestao-link">MaracanÃ£</a>
                    <a href="{{ url_for('buscar') }}?q=Morumbi" class="sugestao-link">Morumbi</a>
                    <a href="{{ url_for('buscar') }}?q=MineirÃ£o" class="sugestao-link">MineirÃ£o</a>
                    <a href="{{ url_for('buscar') }}?q=Beira-Rio" class="sugestao-link">Beira-Rio</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Dicas de uso -->
    <section class="section-card dica-card">
        <h3>ğŸ“Œ Dicas de Busca</h3>
        <ul class="lista-dicas">
            <li>Use o nome completo ou parte dele (ex: "Flamengo" ou "Fla")</li>
            <li>Para jogadores, tente o nome ou apelido (ex: "Ronaldo" ou "FenÃ´meno")</li>
            <li>A busca encontra correspondÃªncias parciais</li>
            <li>NÃ£o diferencia maiÃºsculas de minÃºsculas</li>
        </ul>
    </section>
    {% endif %}
</div>
{% endblock %}
